name: Prototype v1
on: [workflow_dispatch]

jobs:
  init-backup:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v3
      - name: Display github workspace after
        run: |
          ls -a
          ls -a ${{ github.workspace }}
          mkdir -p ${{ github.workspace }}/backup
          echo "This is a backup file" > ${{ github.workspace }}/backup/backup.txt
          ls -a ${{ github.workspace }}/backup
      - name: Upload backup
        uses: actions/upload-artifact@v3
        with:
          name: backup
          path: ${{ github.workspace }}/backup
  create-backup:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout (unncessary)
        uses: actions/checkout@v3
      - name: Download artifact ()
        uses: actions/download-artifact@v3
        with:
          name: backup
          path: ${{ github.workspace }}/backup/
      - name: Create Backup
        run: |
          cp ${{ github.workspace }}/WEBAPP.zip ${{ github.workspace }}/backup/WEBAPP.zip
  deploy:
    runs-on: ubuntu-latest
    needs: init-backup
    steps:
      - name: Simulate deployment
        run: |
          echo "Deploying to production"